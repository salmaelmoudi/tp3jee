<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Patients - Dashboard</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}">
    <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
    <style>
        body {
            background-color: #f1f3f5;
        }

        .sidebar {
            height: 100vh;
            background-color: #343a40;
            padding-top: 2rem;
        }

        .sidebar a {
            color: #adb5bd;
            text-decoration: none;
            display: block;
            padding: 0.75rem 1.25rem;
            transition: all 0.2s;
        }

        .sidebar a:hover {
            background-color: #495057;
            color: white;
        }

        .table th, .table td {
            vertical-align: middle;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-2 sidebar">
            <h5 class="text-white ps-3 mb-4">üè• PatientApp</h5>
            <a href="#">üè† Dashboard</a>
            <a href="#">üìã Patients</a>
            <a href="#">‚öôÔ∏è Param√®tres</a>
        </div>

        <!-- Main content -->
        <div class="col-md-10 p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="fw-bold">Liste des Patients</h3>
                <form class="d-flex" method="get" th:action="@{/index}">
                    <input type="text" class="form-control me-2" name="keyword" placeholder="üîç Rechercher..." th:value="${keyword}">
                    <button type="submit" class="btn btn-outline-dark">Go</button>
                </form>
            </div>

            <!-- Patient Table -->
            <div class="card shadow-sm rounded-4 border-0">
                <div class="card-body p-0">
                    <table class="table table-striped table-hover m-0">
                        <thead class="table-dark text-white">
                        <tr>
                            <th>ID</th>
                            <th>Nom</th>
                            <th>Date de naissance</th>
                            <th>√âtat</th>
                            <th>Score</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="p : ${listPatients}">
                            <td th:text="${p.id}"></td>
                            <td th:text="${p.nom}"></td>
                            <td th:text="${#dates.format(p.dateNaissance, 'dd/MM/yyyy')}"></td>
                            <td>
                                <span th:if="${p.malade}" class="badge bg-danger">Malade</span>
                                <span th:if="${!p.malade}" class="badge bg-success">Sain</span>
                            </td>
                            <td th:text="${p.score}"></td>
                            <td>
                                <a th:href="@{/delete(id=${p.id}, page=${currentPage}, keyword=${keyword})}" class="btn btn-sm btn-outline-danger">
                                    üóë Supprimer
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Pagination -->
            <nav class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:each="page, status : ${pages}">
                        <a class="page-link"
                           th:classappend="${(currentPage==status.index)? 'bg-dark text-white' : ''}"
                           th:href="@{/index(page=${status.index}, keyword=${keyword})}"
                           th:text="${status.index}">1</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>
</body>
</html>
